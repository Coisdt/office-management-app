import{g as v,w as L,h as x,b as r,d as m,i as E,v as N,e,f as l,_ as B,j as M,k as w,l as Q,T as j,u as A,c as I,t as C,m as P,F as T,r as R,n as V,p as S,q as z,s as O,o as K,x as W,a as Y,y as G}from"./index-CrvGm9rs.js";import{A as H,O as J}from"./ActionButton-DwUyGuZt.js";import{F as y}from"./FormButton-BytZ-mpB.js";import"./colorsPickerColors-BRaJAOBD.js";const X={class:"relative w-full md:max-w-[400px] lg:max-w-[400px] mb-4 mt-6"},Z={__name:"Searchbar",emits:["update:searchQuery"],setup(c,{emit:a}){const o=a,s=v("");return L(s,n=>{o("update:searchQuery",n)}),(n,t)=>{const i=x("font-awesome-icon");return r(),m("div",X,[E(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=f=>s.value=f),placeholder:"Search staff members...",class:"mb-4 p-2 border rounded relative w-full"},null,512),[[N,s.value]]),l(i,{class:"absolute top-3 right-3",icon:"search"})])}}},q=[{id:1,src:new URL("/office-management-app/assets/Avatar1-CDYrLE3t.png",import.meta.url).href},{id:2,src:new URL("/office-management-app/assets/Avatar2-C9iQcfbC.png",import.meta.url).href},{id:3,src:new URL("/office-management-app/assets/Avatar3-BTK9v-Q6.png",import.meta.url).href},{id:4,src:new URL("/office-management-app/assets/Avatar4-DoVe2Iol.png",import.meta.url).href},{id:5,src:new URL("/office-management-app/assets/Avatar5-CNYBcc65.png",import.meta.url).href},{id:6,src:new URL("/office-management-app/assets/Avatar6-DGNaQqJr.png",import.meta.url).href},{id:7,src:new URL("/office-management-app/assets/Avatar7-C0Wv6WRP.png",import.meta.url).href}],ee={class:"modal"},te={class:"modal-content w-[90%] sm:w-[80%] md:w-[60%] lg:w-[30%] xl:w-[30%] max-h-[90vh] overflow-auto grid grid-cols-1 relative"},oe={__name:"BaseModal",props:{showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(c,{emit:a}){const o=a,s=c;function n(){o("close")}return(t,i)=>{const f=x("font-awesome-icon");return r(),M(j,{to:"#modals"},[e("div",ee,[e("div",te,[s.showCloseButton?(r(),m("span",{key:0,class:"float-right close absolute right-2 top-2 border border-black rounded-full shadow-lg size-6",onClick:n},[l(f,{class:"absolute top-[5px] right-[5px] size-3 cursor-pointer",icon:["fas","times"]})])):w("",!0),Q(t.$slots,"default",{},void 0)])])])}}},$=B(oe,[["__scopeId","data-v-7ad8384b"]]),se={class:"grid gap-2"},ae={__name:"OptionsModal",props:{staffMember:{type:Object,required:!0,default:()=>[]},office:{type:Object,required:!0,default:()=>[]}},emits:["close","open-edit-modal","open-confirmation-modal"],setup(c,{emit:a}){const o=a;A();function s(){n(),t()}function n(){o("close"),console.log("Closing current modal")}function t(){o("open-edit-modal"),console.log("open-edit-modal")}function i(){o("open-confirmation-modal"),console.log("Opening confirmation modal"),n()}return(f,g)=>(r(),m("div",se,[l(y,{text:"EDIT STAFF MEMBER",backgroundColor:"#489DDA",onClick:s}),l(y,{text:"DELETE STAFF MEMBER",fontColor:"red",onClick:i})]))}},ne={key:0},re={class:"font-bold text-xl"},ie={class:"form-group my-2 bg-white rounded-md h-10 grid items-center"},le={class:"form-group my-2 bg-white rounded-md h-10 grid items-center"},ce={class:"modal-actions mt-4"},fe={key:1},de={class:"navigation grid grid-cols-[auto_1fr] items-center gap-2"},me={class:"font-bold text-xl"},ue={class:"avatars-container p-4 grid grid-cols-2 items-center my-0 mx-auto"},pe=["src","alt","onClick"],ve={class:"text-red-500 text-center"},_e={__name:"AddOrEditStaffModal",props:{office:{type:Object,required:!0,default:()=>({})},staffMember:{type:Object,default:null}},emits:["close"],setup(c,{emit:a}){const o=a,s=c,n=v(!0),t=v(""),i=v(""),f=v(""),g=v(!1),b=A(),u=I(()=>t.value.trim()!==""&&i.value.trim()!==""&&f.value!=="");L(()=>s.staffMember,d=>{d?(t.value=d.firstName||"",i.value=d.lastName||"",f.value=d.imageId||""):(t.value="",i.value="",f.value="")},{immediate:!0});function k(){n.value=!n.value}function h(){n.value=!n.value}async function D(){if(!u.value){g.value=!0;return}const d={firstName:t.value,lastName:i.value,imageId:f.value};try{s.staffMember?b.dispatch("editStaffMember",{officeId:s.office.id,staffMemberId:s.staffMember.id,staffMember:d}):(b.dispatch("addStaffMember",{officeId:s.office.id,staffMember:d}),await b.dispatch("fetchOffices")),console.log("Form submitted",d),o("close")}catch(p){console.error("Failed to submit form",p)}}return(d,p)=>{const F=x("font-awesome-icon");return n.value?(r(),m("div",ne,[e("h2",re,C(s.staffMember?"Edit Staff Member":"New Staff Member"),1),e("form",{onSubmit:p[2]||(p[2]=P((..._)=>d.handleSubmit&&d.handleSubmit(..._),["prevent"])),class:"md:w-[70%] lg:w-[70%] items-center my-0 mx-auto p-3"},[e("div",ie,[E(e("input",{class:"ml-2 w-[90%]",type:"text",id:"firstName",required:"","onUpdate:modelValue":p[0]||(p[0]=_=>t.value=_),placeholder:"First name"},null,512),[[N,t.value]])]),e("div",le,[E(e("input",{class:"ml-2 w-[90%]",type:"text",id:"lastName",required:"","onUpdate:modelValue":p[1]||(p[1]=_=>i.value=_),placeholder:"Last name"},null,512),[[N,i.value]])])],32),p[3]||(p[3]=e("div",{class:"carousel-dots"},[e("span",{class:"dot active"}),e("span",{class:"dot"})],-1)),e("div",ce,[l(y,{text:"NEXT",backgroundColor:"#489DDA",onClick:h})])])):(r(),m("div",fe,[e("span",de,[l(F,{class:"cursor-pointer",onClick:k,icon:"arrow-left"}),e("h2",me,C(s.staffMember?"Edit Staff Member":"New Staff Member"),1)]),e("div",ue,[(r(!0),m(T,null,R(S(q),_=>(r(),m("div",{key:_.id,class:V(["avatar",{selected:f.value===_.id-1}])},[e("img",{src:_.src,alt:"Avatar "+_.id,onClick:Te=>f.value=_.id-1},null,8,pe)],2))),128))]),p[4]||(p[4]=e("div",{class:"carousel-dots mb-4"},[e("span",{class:"dot"}),e("span",{class:"dot active"})],-1)),E(e("div",ve," Please complete all required fields ",512),[[z,g.value]]),l(y,{text:s.staffMember?"UPDATE STAFF MEMBER":"ADD STAFF MEMBER",backgroundColor:"#489DDA",onClick:D},null,8,["text"])]))}}},U=B(_e,[["__scopeId","data-v-5ef534c2"]]),ge={class:"confirmation-modal"},be={class:"grid grid-cols-[auto_auto] gap-3 items-baseline"},he={class:"font-bold"},Me={class:"buttons grid gap-2 mt-5"},we={__name:"ConfirmationModal",props:{message:{type:String,required:!0}},emits:["close","confirm"],setup(c,{emit:a}){const o=a,s=()=>{o("confirm")},n=()=>{o("close")},t=()=>{o("close")};return(i,f)=>{const g=x("font-awesome-icon");return r(),m("div",ge,[e("div",be,[l(g,{class:"cursor-pointer mt-2",onClick:t,icon:"arrow-left"}),e("p",he,C(c.message),1)]),e("div",Me,[l(y,{text:"DELETE STAFF MEMBER",backgroundColor:"red",onClick:s}),l(y,{text:"KEEP STAFF MEMBER",fontColor:"#489DDA",onClick:n})])])}}},Ce={class:"grid grid-cols-[1fr_5fr_1fr] gap-4 items-center relative"},ye=["src"],xe={class:"text-sm"},ke={__name:"StaffInOfficeCard",props:{staffMember:{type:Object,required:!0,default:()=>[]},office:{type:Object,required:!0,default:()=>({})}},setup(c){let a=c;const o=v(!1),s=v(!1),n=v(!1),t=A(),i=d=>q[d].src,f=()=>{o.value=!0},g=()=>{o.value=!1},b=()=>{o.value=!1,s.value=!0},u=()=>{s.value=!1},k=()=>{o.value=!1,n.value=!0},h=()=>{n.value=!1},D=async()=>{if(console.log("Deleting staff member"),a.staffMember&&a.office)try{await t.dispatch("deleteStaffMember",{officeId:a.office.id,staffMemberId:a.staffMember.id}),console.log("Staff member deleted"),h()}catch(d){console.error("Error deleting staff member:",d)}};return(d,p)=>{const F=x("font-awesome-icon");return r(),m("div",Ce,[e("img",{class:"border-2 border-white rounded-full shadow-lg size-10",src:i(c.staffMember.imageId),alt:"Staff Avatar"},null,8,ye),e("h2",xe,C(c.staffMember.firstName)+" "+C(c.staffMember.lastName),1),l(F,{onClick:f,class:"absolute right-0 cursor-pointer",icon:["fas","ellipsis-v"]}),o.value?(r(),M($,{key:0,onClose:g,showCloseButton:!1},{default:O(()=>[e("div",null,[l(ae,{onClose:g,onOpenEditModal:b,onOpenConfirmationModal:k,office:S(a).office,staffMember:S(a).staffMember},null,8,["office","staffMember"])])]),_:1})):w("",!0),s.value?(r(),M($,{key:1,onClose:u},{default:O(()=>[e("div",null,[l(U,{onClose:u,staffMember:c.staffMember,office:S(a).office},null,8,["staffMember","office"])])]),_:1})):w("",!0),n.value?(r(),M($,{key:2,onClose:h,showCloseButton:!1},{default:O(()=>[e("div",null,[l(we,{onClose:h,onConfirm:D,message:"Are you sure you want to delete this staff member?"})])]),_:1})):w("",!0)])}}},Ee={class:"mb-10"},Se={class:"grid grid-cols-[1fr_auto] items-center"},Oe={class:"mb-2 mt-4"},$e={key:0,class:"staff-list grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},Ae={key:1},De={key:0},Fe={key:1},Ne={__name:"StaffInOfficeList",props:{office:{type:Object,required:!0,default:()=>({})}},setup(c){const a=c,o=v(""),s=I(()=>o.value?a.office.staffMembersInOffice.filter(n=>n.firstName.toLowerCase().includes(o.value.toLowerCase())||n.lastName.toLowerCase().includes(o.value.toLowerCase())):a.office.staffMembersInOffice);return(n,t)=>(r(),m("div",Ee,[l(Z,{searchQuery:o.value,"onUpdate:searchQuery":t[0]||(t[0]=i=>o.value=i)},null,8,["searchQuery"]),e("div",Se,[t[1]||(t[1]=e("h1",{class:"text-xl font-bold mb-2 mt-4"},"Staff Members in Office",-1)),e("span",Oe,C(s.value.length),1)]),s.value.length?(r(),m("div",$e,[(r(!0),m(T,null,R(s.value,i=>(r(),M(ke,{key:i.id,staffMember:i,office:a.office},null,8,["staffMember","office"]))),128))])):(r(),m("div",Ae,[a.office.staffMembersInOffice.length?(r(),m("p",Fe,'No staff members match your search for "'+C(o.value)+'"',1)):(r(),m("p",De," There are currently no staff members assigned to this office. "))]))]))}},Be={class:"office-details-page"},Ie={class:"navigation grid grid-cols-[auto,1fr,auto] items-center mb-4"},Le={__name:"OfficeDetailsPage",setup(c){const a=v(!1),o=Y(),s=G(),n=A(),t=v(null),i=()=>{o.push("/")},f=I(()=>n.state.offices),g=n.dispatch.bind(n,"fetchOffices");return K(()=>{g()}),W(()=>{const b=parseInt(s.params.id);t.value=f.value.find(u=>u.id===b)}),(b,u)=>{const k=x("font-awesome-icon");return r(),m("div",Be,[e("span",Ie,[l(k,{onClick:i,class:"",icon:"arrow-left"}),u[3]||(u[3]=e("span",{class:"grid justify-center"},"Office",-1)),l(H,{onClick:u[0]||(u[0]=h=>a.value=!0),text:"Add Staff Member"})]),t.value?(r(),M(J,{key:0,office:t.value,class:"mt-4"},null,8,["office"])):w("",!0),t.value?(r(),M(Ne,{key:1,office:t.value},null,8,["office"])):w("",!0),a.value?(r(),M($,{key:2,onClose:u[2]||(u[2]=h=>a.value=!1)},{default:O(()=>[l(U,{staffMember:null,office:t.value,onClose:u[1]||(u[1]=h=>a.value=!1)},null,8,["office"])]),_:1})):w("",!0)])}}},je=B(Le,[["__scopeId","data-v-c342921f"]]);export{je as default};
